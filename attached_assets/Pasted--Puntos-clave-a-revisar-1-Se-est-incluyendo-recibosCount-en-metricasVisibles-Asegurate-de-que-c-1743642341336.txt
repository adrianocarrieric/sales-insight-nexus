‚úÖ Puntos clave a revisar
1. ¬øSe est√° incluyendo recibosCount en metricasVisibles?
Asegurate de que cuando llam√°s a generateChartData(...), el array metricasVisibles contenga "recibosCount".

ts
Copiar
Editar
metricasVisibles: string[] = ["recibosCount"]
Si no lo est√°s pasando expl√≠citamente, y recibosCount no est√° en el array por defecto, no se mostrar√° en el gr√°fico.

2. ¬øLa clave recibosCount existe en los objetos de agrupaci√≥n?
En tu funci√≥n agruparVentasPorTiempo, agreg√°s los recibos como Set y despu√©s hac√©s esto:

ts
Copiar
Editar
// Calcular recibosCount a partir del Set de recibos
Object.keys(result).forEach(lbl => {
  result[lbl].recibosCount = result[lbl].recibos.size;
});
üëâ Esto est√° perfecto. Pero asegurate de que v.NumeroRecibo est√© bien definido y no tenga espacios. Hac√©s:

ts
Copiar
Editar
if (v.TipoRecibo !== "Reembolso" && v.NumeroRecibo && v.NumeroRecibo.trim() !== '')
üîç Recomendaci√≥n: Logge√° temporalmente para ver si los datos entran correctamente:

ts
Copiar
Editar
console.log("RECIBO:", v.NumeroRecibo, "FECHA:", v.Fecha);
3. ¬øEl campo NumeroRecibo viene con nombre distinto?
Si tus datos CSV tienen el campo como "N√∫mero de Recibo" o "NroRecibo", pero tu interfaz Venta lo define como NumeroRecibo, puede que el campo est√© vac√≠o.

üëâ Verific√° en tu archivo o hook useSalesData c√≥mo est√°s mapeando ese campo.

4. ¬øSe est√°n filtrando correctamente por fecha en ventasEnRango?
Si los recibos est√°n en ventasHistoricas, pero el rango es corto, no los vas a ver reflejados.

ts
Copiar
Editar
const ventasEnRango = ventasHistoricas.filter(v => {
  if (!v.Fecha) return false;
  const fv = dayjs(v.Fecha);
  return fv.isAfter(start.subtract(1, 'day')) && fv.isBefore(endExtendido.add(1, 'day'));
});
üîç Revis√° con un console.log(ventasEnRango.length) si est√°n entrando datos.

5. ¬øEl label de agrupaci√≥n coincide con los datos en timeLabels?
Puede que la agrupaci√≥n est√© generando labels con formato que no matchea con los generados por agruparVentasPorTiempo.

Ejemplo:

agruparVentasPorTiempo usa: formatIsoWeekKey(v.Fecha) ‚Üí 2024-W12

Pero si generarSemanasGlobales genera 2024-S12, no hay match.

üëâ Asegurate de que formatIsoWeekKey y generarSemanasGlobales usan el mismo formato exacto (ej. YYYY-[W]WW).

‚úÖ Qu√© pod√©s hacer ya mismo
Confirm√° que recibosCount est√© en metricasVisibles.

Verific√° con console.log si NumeroRecibo viene cargado.

Confirm√° que los labels entre timeLabels y agrupadas matchean.

Revis√° que formatIsoWeekKey devuelva el mismo formato que generarSemanasGlobales.

Si quer√©s, pasame c√≥mo est√°s llamando a generateChartData(...) o el c√≥digo de DateSelector y useSalesData, y te lo reviso todo en conjunto.